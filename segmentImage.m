function [BW,maskedImage] = segmentImage(X)
%segmentImage Segment image using auto-generated code from imageSegmenter app
%  [BW,MASKEDIMAGE] = segmentImage(X) segments image X using auto-generated
%  code from the imageSegmenter app. The final segmentation is returned in
%  BW, and a masked image is returned in MASKEDIMAGE.

% Auto-generated by imageSegmenter app on 05-Nov-2021
%----------------------------------------------------


% Adjust data to span data range.
X = imadjust(X);

% Graph cut
foregroundInd = [93208 129170 136112 139109 139112 140607 142657 143601 145655 149592 149598 154083 156144 160081 166072 168135 173563 175626 179561 181620 185548 189113 190037 195107 199037 201104 202028 202602 206519 212514 214595 215517 218515 220006 228087 231997 231999 239488 244578 248484 249979 252977 255073 264966 265569 268567 275459 282064 282946 291948 298556 302426 308437 315051 321926 327902 328543 328545 332417 344408 348040 351882 354898 364536 365388 375034 375880 378858 384032 387873 394531 404338 406529 407335 414029 417847 424527 434311 437329 441025 444025 450814 463523 464287 464298 477785 486774 487523 491263 494267 503260 504020 507020 510751 518238 520518 521243 527223 529516 537016 537707 543016 546014 549688 550514 551219 553514 559514 562514 563163 563166 567014 573014 573646 579014 579699 582016 584128 590117 592520 597604 600679 603593 609025 609584 614073 620064 626051 626154 630539 633031 639522 645504 645634 652987 660473 663040 663610 672458 679938 679940 683086 685923 688547 691907 696389 702367 702564 708349 709554 715828 721810 725042 726294 729060 732275 738065 738261 743020 745571 745750 751739 754576 754726 759084 759213 762498 763313 763317 763319 763321 765093 765199 766310 768106 769304 771184 772617 772629 772642 772657 772668 773797 776799 778980 779784 779795 782775 788762 788764 790251 792465 793240 795464 799229 803718 809704 812685 815669 815749 818652 820138 823123 826105 828438 829090 832078 835067 835076 836557 839550 839700 844925 845539 848530 853017 859006 864411 867993 868145 878481 882400 888966 898087 898889 898891 899453 914437 918380 922043 924919 931872 935402 944388 944497 948365 951875 954873 962457 964860 965360 974351 978922 984350 984838 993827 1001314 1001358 1004355 1009841 1010302 1011825 1020789 1020791 1028261 1030834 1034274 1037230 1044328 1044761 1050699 1056325 1058247 1060823 1064166 1066821 1070230 1074321 1080129 1080637 1080716 1083634 1086126 1091199 1093819 1096624 1103108 1103181 1104120 1107120 1110316 1119657 1120620 1121154 1123814 1124084 1132812 1133137 1137312 1137314 1140317 1143118 1146118 1146617 1152325 1152559 1157095 1162834 1167339 1167575 1170117 1173540 1173559 1176349 1179544 1182529 1183861 1187015 1189870 1190006 1192881 1192986 1192995 1195896 1195967 1195975 1195984 1198914 1198931 1198944 1198956 1199022 1203117 1223004 1226002 1242115 1249984 1275467 1279615 1292859 1292866 1292870 1292872 1292874 1295853 1297346 1300342 1303328 1303331 1303337 1305447 1306330 1309324 1309615 1310817 1313808 1316806 1318613 1319791 1319799 1322766 1322784 1326431 1327275 1333211 1333266 1336255 1343746 1346656 1348613 1352733 1354914 1358718 1358720 1363107 1366209 1375200 1378902 1379552 1379691 1384611 1385682 1388676 1393167 1393169 1396003 1396163 1398997 1399156 1401389 1402147 1405136 1409625 1412609 1412610 1415598 1418442 1420609 1421587 1422380 1426074 1429056 1431897 1438036 1441872 1442353 1442517 1445499 1451477 1454318 1455369 1455961 1458783 1458959 1461367 1461946 1464107 1464367 1464754 1467928 1468867 1469236 1472216 1472219 1472413 1474869 1477869 1478201 1478397 1481183 1484380 1485376 1485668 1488869 1494381 1494654 1494855 1500836 1500844 1502141 1502327 1507898 1508309 1510604 1514126 1514128 1516604 1516914 1516916 1517293 1524440 1524772 1530608 1531971 1532258 1538011 1538240 1544044 1544229 1547079 1547104 1547218 1548590 1548628 1548646 1548694 1548701 1548708 1551661 1551663 1551677 1551688 1557102 1568070 1587546 1607020 1611098 1626498 1639980 1642976 1659458 1660596 1674438 1689422 1696911 1699909 1710400 1722392 1726595 1735885 1749380 1762876 1773372 1786870 1789591 1801870 1816874 1825876 1828880 1831880 1831881 1833387 1836402 1842422 1848445 1849587 1852969 1852971 1858995 1865013 1866533 1869551 1875571 1881586 1881588 1886104 1892117 1895126 1895139 1896654 1899087 1902670 1905087 1908687 1913201 1916205 1919221 1922232 1928247 1929760 1932769 1935778 1938785 1941791 1941793 1941802 1944816 1945587 1946333 1949347 1952362 1952375 1955391 1958408 1961422 1961426 1962939 1965953 1968966 1971968 1975589 1976484 1982497 1985508 1985521 1988536 1991556 1993074 1993090 1996101 1996103 1996116 1996127 1996138 1996149 1998091 1999156 1999158 1999169 1999178 2002185 2002193 2005202 2008213 2008222 2008224 2008229 2009736 2012742 2012747 2014593 2015753 2015758 2015762 2015766 2015769 2017595 2018769 2018771 2021764 2024740 2024753 2028814 2028835 2028856 2028875 2028893 2028909 2028924 2028928 2028942 2028961 2028981 2029204 2029222 2031100 2031723 2031745 2031767 2031791 2031793 2031997 2032182 2032191 2032193 2034698 2034701 2035017 2035019 2035036 2035151 2035160 2035171 2037478 2037482 2037498 2037517 2037537 2037559 2037582 2037586 2037613 2037641 2037668 2038052 2038067 2038129 2038131 2038140 2038607 2038958 2039583 2039601 2039616 2041922 2041940 2044907 2047887 2050622 2050869 2053850 2055334 2058316 2061146 2061148 2061301 2061303 2064288 2067170 2067275 2070191 2070263 2071712 2071732 2071748 2071750 ];
backgroundInd = [53198 126643 159612 182092 192581 195579 203070 215059 225540 239022 248923 252502 268986 280975 282473 283390 294460 304949 315438 319357 327425 337914 348403 357389 361321 364874 375356 387339 394827 398782 403814 408305 411297 411299 414294 414296 425753 425755 439233 451216 461698 470678 481162 487149 488649 494636 500623 508110 517099 518598 530585 530587 538076 547067 563554 563556 577045 587534 593525 598019 601015 607012 610006 612999 613001 617493 620481 620486 623475 626470 630961 636953 639948 645942 647439 650435 656431 659426 660920 660922 663919 672908 677400 677402 974981 1054366 1067841 1087306 1105275 1105279 1120253 1130735 1138216 1147205 1153194 1154684 1160665 1160673 1163656 1163660 1166634 1166643 1166652 1168085 1168089 1168092 1168099 1168105 1168114 1168123 1171070 1171076 1171078 1171079 1171081 1171083 1174063 1174067 1177057 1177059 1180052 1184543 1187536 1193525 1196515 1196517 1199508 1204003 1209986 1209988 1209993 1212986 1610981 1615448 1615452 1621428 1631888 1640848 1645313 1654286 1657233 1657246 1657266 1660211 1660213 1660220 1661705 1664698 1664702 1667693 1670685 1675176 1681165 1687151 1687152 1689988 1691488 1691490 1691493 1691501 1691636 1694508 1694515 1697525 1700532 1700623 1703539 1703541 1706546 1706609 1708048 1708050 1708083 1708094 1711052 1711056 1711061 1711067 1711070 1711072 1711078 2237950 2243740 2243742 2243755 2243769 2243784 2243786 2246722 2246806 2246831 2246833 2246859 2246884 2246888 2251205 2257184 2259668 2259670 2259688 2259705 2259723 2259725 2259741 2259760 2259780 2261282 2261667 2264134 2264150 2264300 2264318 2264338 2264340 2264356 2264373 2264391 2264393 2264409 2264426 2264441 2264665 2267117 2267459 2267647 2270082 2270084 2270099 2270477 2270479 2270579 2270601 2270605 2270627 2273068 2273541 2273559 2276044 2276055 2276501 2276521 2277535 2283524 2286513 2289498 2293987 2296980 2299978 2302967 2308958 2310447 2313440 2316434 2319425 2319429 2322416 2322420 2323909 2323911 2323914 2326909 ];
L = superpixels(X,12100);
BW = lazysnapping(X,L,foregroundInd,backgroundInd);

% Create masked image.
maskedImage = X;
maskedImage(~BW) = 0;
end
